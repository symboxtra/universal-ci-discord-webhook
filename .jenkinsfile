pipeline {
    agent none

    environment {
        WEBHOOK_URL = credentials('WEBHOOK_URL')
    }

    ansiColor('xterm') {
        
    }

    stages {

        stage('Test Linux') {
            agent {
                label 'linux'
            }

            steps {
                echo 'Testing Linux...'
            }
            
            post {
                always {
                    echo 'always post'
                }
                success {
                    echo 'success post'
                }
                failure {
                    echo 'fail post'
                }
            }
        }

    }

    stages {

        stage('Test Windows') {
            agent {
                label 'windows'
            }

            steps {
                powershell 'echo "Testing Windows..."'
            }
            
            post {
                always {
                    powershell 'Write-Host "always post"'
                }
                success {
                    powershell 'Write-Host "success post"'
                }
                failure {
                    powershell 'Write-Host "fail post"'
                }
            }
        }
    }

}